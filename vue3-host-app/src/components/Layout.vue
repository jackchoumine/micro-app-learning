<!--
 * @Author      : ZhouQiJun
 * @Date        : 2024-01-13 22:56:53
 * @LastEditors : ZhouQiJun
 * @LastEditTime: 2024-01-16 09:29:48
 * @Description : 
-->
<script setup>
import microApp from '@micro-zoe/micro-app'

import { useLocalStorage } from '../hooks'

const [baseCount] = useLocalStorage('baseCount', 0)
const [baseAge] = useLocalStorage('baseAge')
function incrementAge() {
  baseAge.value++
  // 向子应用react18-app传递数据
  microApp.setData(
    'react18-app',
    {
      baseAge: baseAge.value,
    },
    dataFromChild => {
      console.log('来自子应用react18-app的数据:', dataFromChild)
    }
  )
  console.log('向子应用react18-app传递数据 baseAge:', baseAge.value)
}
</script>

<template>
  <div class="layout">
    <nav>
      <!-- 导航栏 -->
      <div class="nav-container">
        <router-link to="/">home</router-link>
        <router-link to="/react-app">react-app</router-link>
        <router-link to="/vue-app">vue-app</router-link>
        <router-link to="/react-app/about">react-app/about</router-link>
      </div>
      <div class="data-container">
        <p>nav in host app</p>
        <p>baseCount {{ baseCount }}</p>
        <p>baseAge {{ baseAge }} <button @click="incrementAge">baseAge +1</button></p>
      </div>
    </nav>
    <main>
      <!-- 主体内容 -->
      <router-view></router-view>
    </main>
  </div>
</template>

<style scoped>
.layout {
  display: flex;
  flex-direction: row;
  height: 100vh;

  nav {
    border-right: 1px solid #35495e;
    margin: 0 10px;

    .nav-container {
      display: flex;
      flex-direction: column;
      height: 100px;
      background-color: #fff;
    }

    .data-container {
      background-color: lightblue;
    }
  }

  a {
    color: #35495e;
    text-decoration: none;
    width: 100%;
    margin: 0 10px;
  }

  :deep(a.router-link-active) {
    color: #42b983;
    text-decoration: underline;
  }
}
</style>
